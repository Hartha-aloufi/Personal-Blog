---
title: التصفح الآمن
date: '2022-1-5'
tags: ['شبكات', 'TLS', 'بروتوكول']
draft: false
summary: 'آمان آآآآآآمان آآآمآآآآآن'
---

تحدثنا فيما سبق عن بروتوكولي النقل الـ TCP والـ UDP, ودائماً ما يقترن النقل والارسال بالسطو والاعترراض والتزييف, ويقترن أيضاً بالحماية والتشفير وتأمين ما ينقل. 

تقتصر مهمة بروتوكولات النقل فقط على نقل وايصال البيانات ولا تُعنى ابداً بتأمين المنقول أو حمايته, فهذه مهمة إضافية توكل الى بروتوكول آخر وهو بروتوكول أمن طبقة النقل (Transport Layer Security).



تم البدء بتطوير بروتوكول الـ Secure Socket Layer- SSL- في شركة Netscape لتمكين العمليات التجارية على الشابكة (التجارة الالكترونية), والتي تتطلب تشفير وحماية معلومات العملاء والاستيثاق منهم (Authentication).  ضل الاصدار الاول من الـ SLL داخلياً في شركة نتسكيب وذلك لوجود مشاكل عدة به الى أن ظهر الاصدار الثاني بسرعة لحل تلك المشاكل ومن ثم الاصدار الثالث منه. كان هناك شركات ومجموعات أخرى تعمل ايضاً على ايجاد حلول لتشفير وتأمين الشابكة, كلٌ يعمل لوحده, مثل شركة مايكروسوفت. الى أن تم توحيد العمل بينهما ليظهر لدينا 

بروتوكول الـ  TLS باصداره الاول سنة 1999 هو فقط بروتوكول SLL الاصدار الثالث مع بعض التحسينات. أي SSL v3.1.



يتم عادةً استخدام مسمى الـ SSL والـ TLS للاشارة الى نفس الشيء, لكنهما عملياً مختلفان, بالطبع ليسا بروتوكولين مختلفين تماماً, لكنهما يشيران الى اصدارات مختلفة لبروتوكول واحد.



استمرت التحديثات على بروتوكول الـ TLS لحل بعض المشاكل المكتشفة ولتحسين قدراته فظهر TLS 1.1 سنة 2006 ثم TLS 1.2 سنة 2008 ثم حديثاً TLS 1.3 سنة 2018.



### التشفير والإستيثاق وسلامة البيانات

صمم بروتوكول أمن النقل TLS ليقدم 3 خدمات للتطبيقات التي تعمل فوقه: التشفير والإستيثاق وسلامة البيانات, عملياً أن لا تجبر على استخدام هذه الثلاث في كل الحالات, لكن تطبيق الويب الآمن يسخرها كلها.

##### التشفير:

هي آلية لتعمية ما يرسل بين طرفين. وقد كانت العرب تستخدم مصطلح التَعمية واستخراج المُعَمَّى بدل ما يعرف اليوم بالتشفير وفكه. 

##### الإستيثاق:

هي عملية التأكد من صلاحية وصحة الوثيقة-كيف ما كانت- المستخدمة لتعريف الهوية. 

##### سلامة البيانات:

هي آلية لكشف العبث والتزوير في البيانات.



تم تصميم بروتوكول أمن النقل TLS حيث يأتي بين طبقة التطبيق وطبقة النقل وبذلك فان بروتوكولات طبقة النقل لا تتأثر بالتشفير وبما يفعله الـ TLS فهو أمر لا يعنيها. وذلك فإن لدينا بروتوكول HTTP وليس لدينا TLSS أو UDPS مثلاً.

![طبقة التأمين](/static/images/blogs/التصافح-الامن/طبقة-التأمين.png)




سنتحدث باذن الله عن بروتوكول أمن النقل ببعض التفصيل, ونشمل:

1. التصافح (Handshake).
2. استئناف الجلسة (Session Resumption).
3. سلسلة الثقة (Chain of Trust) ومراجع التصديق (Certificate Authorities).
4. تحسين أداء الـ TLS.



### التصافح

قبل فتح قناة اتصال آمنة بين طرفين, يجب أولاً اﻹتفاق على عدّة أُمور فيما بينهما, وهذا دائماً هدف التصافح, وهو تهئيةُ الإتصال. فيجب على الطرفين الاتفاق على اصدار الـ TLS وخوارزمية التشفير (ciphersuite) وعلى المفاتيح التي ستستخدم في التشفير. ويعطي بروتوكول الـ TLS لكلا طرفي الاتصال امكانية التحقق من هويّة الآخر(الإستيثاق) كجزء من عملية التصافح. للاسف فكل واحدةٍ مما سبق يتطلب جولة كاملة بين الخادم والعميل, وهذا يزيد زمن الوصول لكل اتصالات التي تستخدم الـ TLS.

![التصافح الثلاثي](/static/images/blogs/التصافح-الامن/تصافح-بروتوكول-أمن-النقل.png)

